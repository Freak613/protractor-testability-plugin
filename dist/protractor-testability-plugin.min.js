/*! protractor-testability-plugin - v1.0.1
 *  Release on: 2016-01-23
 *  Copyright (c) 2016 Alfonso Presa
 *  Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){"use strict";var a=require("fs");return{name:"protractor-testability-plugin",onPageLoad:function(){var b=a.readFileSync(require.resolve("testability.js")).toString();browser.executeScript("if(!window.testability) {"+b+"}"),browser.executeScript(function(){window.angular||(window.angular={resumeBootstrap:function(){},module:function(){return{config:function(){return this}}},getTestability:function(){return{whenStable:function(a){a()}}}}),window.addEventListener("onload",function(){window.$&&(window.$.ajaxStart(window.testability.oneMore),window.$.ajaxStart(window.testability.oneLess))})})},waitForPromise:function(){return browser.executeAsyncScript("return testability.when.ready.apply(null,arguments)").then(function(a){if(a)throw"Error while waiting to sync with the page: "+JSON.stringify(a)})}}});