/*! protractor-testability-plugin - v1.0.1
 *  Release on: 2016-01-23
 *  Copyright (c) 2016 Alfonso Presa
 *  Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){"use strict";var a=require("fs");return{name:"protractor-testability-plugin",onPageLoad:function(){var b=a.readFileSync(require.resolve("testability.js")).toString();browser.executeScript("if(!window.testability) {"+b+"}"),browser.executeScript(function(){function a(){window.$&&(window.$.ajaxStart(window.testability.wait.oneMore),window.$.ajaxStart(window.testability.wait.oneLess))}function b(a,b){var c=window[a],d=window[b],e={};window[a]=function(){var a,b=arguments[0],d=arguments[1];return arguments[0]=function(){e[a]=void 0,5e3>d&&window.testability.wait.oneLess(),b.apply(window,arguments)},5e3>d&&window.testability.wait.oneMore(),a=c.apply(window,arguments),e[a]=!0,a},window[b]=function(){return e[arguments[0]]&&(window.testability.wait.oneLess(),e[arguments[0]]=void 0),d.apply(window,arguments)}}window.angular||(window.angular={resumeBootstrap:function(){},module:function(){return{config:function(){return this}}},getTestability:function(){return{whenStable:function(a){a()}}}}),window.addEventListener?window.addEventListener("onload",a):window.attachEvent("load",a),b("setTimeout","clearTimeout")})},waitForPromise:function(){return browser.executeAsyncScript("return testability.when.ready.apply(null,arguments)").then(function(a){if(a)throw"Error while waiting to sync with the page: "+JSON.stringify(a)})}}});